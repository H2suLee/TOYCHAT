(function(){"use strict";var e={5074:function(e,t,n){var o=n(5130),a=n(6768);const r={key:1},i={key:1};function l(e,t,n,l,u,c){const s=(0,a.g2)("Login"),d=(0,a.g2)("Header"),f=(0,a.g2)("LeftMenu"),m=(0,a.g2)("AdminLogin"),g=(0,a.g2)("AdminHeader"),k=(0,a.g2)("AdminLeftMenu"),p=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bo)((0,a.Lk)("div",null,[(0,a.Lk)("div",null,[c.isLogin?((0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(d),(0,a.bF)(f)])):((0,a.uX)(),(0,a.Wv)(s,{key:0}))])],512),[[o.aG,!l.isAdmin]]),(0,a.bo)((0,a.Lk)("div",null,[(0,a.Lk)("div",null,[c.isLogin?((0,a.uX)(),(0,a.CE)("div",i,[(0,a.bF)(g),(0,a.bF)(k)])):((0,a.uX)(),(0,a.Wv)(m,{key:0}))])],512),[[o.aG,l.isAdmin]]),(0,a.bF)(p)])}var u=n(144),c=n(973);const s=(0,a.Lk)("p",null,"홍길동 접속중..",-1),d=(0,a.Lk)("p",null,"로그아웃",-1),f=[d],m=(0,a.Lk)("h2",null,"대화",-1),g=(0,a.Lk)("p",null,"질문이 있으신가요? 지금 문의하세요!",-1);function k(e,t,n,o,r,i){const l=(0,a.g2)("ChatModal");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.eW)(" 헤더 "),s,(0,a.Lk)("a",{onClick:t[0]||(t[0]=(...e)=>o.fn_kakaoLogout&&o.fn_kakaoLogout(...e))},f),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>o.openModal&&o.openModal(...e))},"Open Modal"),(0,a.bF)(l,{modelValue:o.isModalVisible,"onUpdate:modelValue":t[2]||(t[2]=e=>o.isModalVisible=e)},{default:(0,a.k6)((()=>[m,g])),_:1},8,["modelValue"])])}const p=e=>((0,a.Qi)("data-v-0dd5f20e"),e=e(),(0,a.jt)(),e),v=p((()=>(0,a.Lk)("p",null,"온라인 문의가 가능한 상태입니다.",-1))),h=p((()=>(0,a.Lk)("p",null,"가능한 상담원 아이콘.. 호버하면 상담원의 닉네임",-1))),b=p((()=>(0,a.Lk)("div",null,[(0,a.Lk)("p",null,"안녕하세요! 어떻게 도와드릴끼요?")],-1)));function A(e,t,n,r,i,l){return r.visible?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"modal-overlay",onClick:t[6]||(t[6]=(0,o.D$)(((...e)=>r.close&&r.close(...e)),["self"]))},[(0,a.Lk)("div",{class:"modal-content",ref:"modalContent",onMousedown:t[3]||(t[3]=(...e)=>r.startDrag&&r.startDrag(...e)),onMouseup:t[4]||(t[4]=(...e)=>r.stopDrag&&r.stopDrag(...e)),onMousemove:t[5]||(t[5]=(...e)=>r.drag&&r.drag(...e))},[(0,a.Lk)("button",{class:"modal-close",onClick:t[0]||(t[0]=(...e)=>r.close&&r.close(...e))},"×"),(0,a.RG)(e.$slots,"default",{},void 0,!0),v,h,b,(0,a.Lk)("div",null,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.messageText=t),placeholder:"메시지 작성.."},null,512),[[o.Jo,e.messageText]]),(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...t)=>e.sendMessage&&e.sendMessage(...t))}," 전송 ")])],544)])):(0,a.Q3)("",!0)}var L=n(4373),S={props:{modelValue:{type:Boolean,default:!1}},setup(e,{emit:t}){const n=(0,u.KR)(e.modelValue),o=(0,u.KR)(null);let r=(0,u.KR)(!1),i=0,l=0,c=0,s=0;(0,u.KR)("");let d=null;const f=()=>{const e=localStorage.getItem("id"),t=localStorage.getItem("nick");L.A.post("/api/chat/create",{id:e,nick:t}).then((n=>{let o=n.data.chatroomId;const a={chatroomId:o,id:e,nick:t,content:t+"님이 입장하였습니다.",type:"ENTER"};m(a)}))},m=e=>{d.readyState===WebSocket.OPEN?(d.send(JSON.stringify(e)),console.log("Sent message: ",JSON.stringify(e))):console.error("WebSocket is not open")},g=()=>{d=new WebSocket("ws://localhost:9090/ws/chat"),d.onopen=()=>{console.log("WebSocket connection opened")},d.onmessage=e=>{console.log("Message from server: ",e.data)},d.onclose=()=>{console.log("WebSocket connection closed")},d.onerror=e=>{console.error("WebSocket error: ",e)}},k=()=>{t("update:modelValue",!1)},p=e=>{r.value=!0,i=e.clientX,l=e.clientY;const t=o.value.getBoundingClientRect();c=t.left,s=t.top},v=()=>{r.value=!1},h=e=>{if(!r.value)return;const t=e.clientX-i,n=e.clientY-l;o.value.style.left=`${c+t}px`,o.value.style.top=`${s+n}px`};return(0,a.wB)((()=>e.modelValue),(e=>{n.value=e,e&&(null!==d&&d.readyState!==WebSocket.CLOSED||(g(),f()))})),(0,a.sV)((()=>{})),{visible:n,close:k,modalContent:o,startDrag:p,stopDrag:v,drag:h,sendWebSocket:m}}},C=n(1241);const y=(0,C.A)(S,[["render",A],["__scopeId","data-v-0dd5f20e"]]);var w=y,I={components:{ChatModal:w},setup(){const e=(0,c.rd)(),t=()=>{window.Kakao.Auth.logout((t=>{t&&(localStorage.setItem("isAuthenticated",!1),localStorage.setItem("id",""),localStorage.setItem("nickname","")),e.go("/")}))},n=(0,u.KR)(!1),o=()=>{console.log("fnc openModal"),n.value=!0};return{fn_kakaoLogout:t,isModalVisible:n,openModal:o}}};const E=(0,C.A)(I,[["render",k]]);var _=E;function M(e,t){const n=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.eW)(" 왼쪽메뉴 "),(0,a.bF)(n,{to:"/chat/list"},{default:(0,a.k6)((()=>[(0,a.eW)("채팅 이력")])),_:1})])}const j={},O=(0,C.A)(j,[["render",M]]);var W=O;const K=(0,a.Lk)("img",{src:"//k.kakaocdn.net/14/dn/btqCn0WEmI3/nijroPfbpCa4at5EIsjyf0/o.jpg",width:"222"},null,-1),X=[K];function P(e,t,n,o,r,i){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("a",{onClick:t[0]||(t[0]=(...e)=>i.fn_kakaoLogin&&i.fn_kakaoLogin(...e))},X)])}var V={methods:{fn_kakaoLogin(){window.Kakao.Auth.login({scope:"profile_nickname",success:this.fn_getKakaoAccount})},fn_getKakaoAccount(){window.Kakao.API.request({url:"/v2/user/me",success:e=>{var t=e.id,n=e.kakao_account.profile.nickname;localStorage.setItem("isAuthenticated",!0),localStorage.setItem("id",t),localStorage.setItem("nick",n),localStorage.setItem("role","USR"),this.$router.go("/chat/list")},fail:e=>{console.log(e),localStorage.setItem("isAuthenticated",!1)}})}}};const x=(0,C.A)(V,[["render",P]]);var D=x;function R(e,t){return(0,a.uX)(),(0,a.CE)("div",null,"user home")}const T={},F=(0,C.A)(T,[["render",R]]);var H=F;function $(e,t,n,o,r,i){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("a",{onClick:t[0]||(t[0]=(...e)=>o.fn_kakaoLogout&&o.fn_kakaoLogout(...e))},"로그아웃")])}var N={setup(){const e=(0,c.rd)(),t=()=>{window.Kakao.Auth.logout((t=>{t&&(localStorage.setItem("isAdminAuthenticated",!1),localStorage.setItem("id",""),localStorage.setItem("nickname",""),localStorage.setItem("role","ADM")),e.go({path:"/admin"})}))};return{fn_kakaoLogout:t}}};const q=(0,C.A)(N,[["render",$]]);var B=q;function G(e,t){return(0,a.uX)(),(0,a.CE)("div",null,"왼쪽메뉴")}const J={},U=(0,C.A)(J,[["render",G]]);var Q=U;const Y=(0,a.Lk)("img",{src:"//k.kakaocdn.net/14/dn/btqCn0WEmI3/nijroPfbpCa4at5EIsjyf0/o.jpg",width:"222"},null,-1),z=[Y];function Z(e,t,n,o,r,i){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("a",{onClick:t[0]||(t[0]=(...e)=>i.fn_kakaoLogin&&i.fn_kakaoLogin(...e))},z)])}var ee={methods:{fn_kakaoLogin(){window.Kakao.Auth.login({scope:"profile_nickname",success:this.fn_getKakaoAccount})},fn_getKakaoAccount(){window.Kakao.API.request({url:"/v2/user/me",success:e=>{var t=e.id,n=e.kakao_account.profile.nickname;localStorage.setItem("isAdminAuthenticated","true"),localStorage.setItem("id",t),localStorage.setItem("nickname",n),localStorage.setItem("role","ADM"),this.$router.go("/admin/chat/manage")},fail:e=>{console.log(e),localStorage.setItem("isAdminAuthenticated","false")}})}}};const te=(0,C.A)(ee,[["render",Z]]);var ne=te;function oe(e,t){return(0,a.uX)(),(0,a.CE)("div",null,"admin home")}const ae={},re=(0,C.A)(ae,[["render",oe]]);var ie=re,le={name:"App",components:{Header:_,LeftMenu:W,Login:D,AdminHeader:B,AdminLeftMenu:Q,AdminLogin:ne,Home:H,AdminHome:ie},setup(){const e=(0,c.lq)(),t=(0,c.rd)(),n=(0,u.KR)(!1),o=()=>{n.value=e.path.startsWith("/admin")};return t.afterEach(((e,t)=>{o()})),{isAdmin:n}},mounted(){this.isAdmin=this.$route.path.startsWith("/admin")},computed:{isLogin(){const e="true"===localStorage.getItem("isAuthenticated"),t="true"===localStorage.getItem("isAdminAuthenticated");return this.isAdmin?t:e}}};const ue=(0,C.A)(le,[["render",l]]);var ce=ue;const se=[{path:"/",name:"Home",component:H},{path:"/chat/list",name:"ChatList",component:()=>n.e(271).then(n.bind(n,7271))},{path:"/admin",name:"AdminHome",component:ie,children:[{path:"/admin/chat/manage",name:"AdminChatManage",component:()=>n.e(150).then(n.bind(n,7150))}]}],de=(0,c.aE)({history:(0,c.LA)(),routes:se});var fe=de;const me=(0,o.Ef)(ce).use(fe);me.config.globalProperties.$axios=L.A,me.mount("#app")}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,r){if(!o){var i=1/0;for(s=0;s<e.length;s++){o=e[s][0],a=e[s][1],r=e[s][2];for(var l=!0,u=0;u<o.length;u++)(!1&r||i>=r)&&Object.keys(n.O).every((function(e){return n.O[e](o[u])}))?o.splice(u--,1):(l=!1,r<i&&(i=r));if(l){e.splice(s--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var s=e.length;s>0&&e[s-1][2]>r;s--)e[s]=e[s-1];e[s]=[o,a,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,o){return n.f[o](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{150:"191bfd4c",271:"993cf6e6"}[e]+".js"}}(),function(){n.miniCssF=function(e){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="test1:";n.l=function(o,a,r,i){if(e[o])e[o].push(a);else{var l,u;if(void 0!==r)for(var c=document.getElementsByTagName("script"),s=0;s<c.length;s++){var d=c[s];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==t+r){l=d;break}}l||(u=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+r),l.src=o),e[o]=[a];var f=function(t,n){l.onerror=l.onload=null,clearTimeout(m);var a=e[o];if(delete e[o],l.parentNode&&l.parentNode.removeChild(l),a&&a.forEach((function(e){return e(n)})),t)return t(n)},m=setTimeout(f.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=f.bind(null,l.onerror),l.onload=f.bind(null,l.onload),u&&document.head.appendChild(l)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var e={524:0};n.f.j=function(t,o){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)o.push(a[2]);else{var r=new Promise((function(n,o){a=e[t]=[n,o]}));o.push(a[2]=r);var i=n.p+n.u(t),l=new Error,u=function(o){if(n.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var r=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",l.name="ChunkLoadError",l.type=r,l.request=i,a[1](l)}};n.l(i,u,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,r,i=o[0],l=o[1],u=o[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(u)var s=u(n)}for(t&&t(o);c<i.length;c++)r=i[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(s)},o=self["webpackChunktest1"]=self["webpackChunktest1"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(5074)}));o=n.O(o)})();
//# sourceMappingURL=app.763175c8.js.map