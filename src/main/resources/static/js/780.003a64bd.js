"use strict";(self["webpackChunktest1"]=self["webpackChunktest1"]||[]).push([[780],{988:function(t,a,o){o.d(a,{A:function(){return v}});var e=o(6768),l=o(5130),s=o(4232);function n(t,a,o,n,r,c){return n.visible?((0,e.uX)(),(0,e.CE)("div",{key:0,class:"modal-overlay",onClick:a[4]||(a[4]=(0,l.D$)(((...t)=>n.close&&n.close(...t)),["self"]))},[(0,e.Lk)("div",{class:"modal-content",ref:"modalContent",onMousedown:a[1]||(a[1]=(...t)=>n.startDrag&&n.startDrag(...t)),onMouseup:a[2]||(a[2]=(...t)=>n.stopDrag&&n.stopDrag(...t)),onMousemove:a[3]||(a[3]=(...t)=>n.drag&&n.drag(...t))},[(0,e.Lk)("button",{class:"modal-close",onClick:a[0]||(a[0]=(...t)=>n.close&&n.close(...t))},"×"),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(n.messages,((t,a)=>((0,e.uX)(),(0,e.CE)("div",{key:a},[(0,e.Lk)("p",null,(0,s.v_)(t.nick)+" : "+(0,s.v_)(t.content),1)])))),128))],544)])):(0,e.Q3)("",!0)}var r=o(144),c=o(4373),u={props:{modalValue:{type:Boolean,default:!1},chatroomId:{type:String,default:""}},emits:["update:modalValue"],setup(t,{emit:a}){const o=(0,e.EW)((()=>t.userId)),l=(0,e.EW)((()=>t.nick)),s=(0,e.EW)((()=>t.chatroomId)),n=(0,r.KR)(t.modalValue),u=(0,r.KR)(null);let d=(0,r.KR)(!1),i=0,v=0,m=0,h=0;const p=(0,r.KR)("");let k=(0,r.KR)([]);const C=async()=>{try{const t=await c.A.post("/api/chat/chatList",{chatroomId:s.value});k.value=t.data}catch(t){console.error("Error fetching chat list:",t)}},g=()=>{s.value="",k.value=[],a("update:modalValue",!1)},I=t=>{d.value=!0,i=t.clientX,v=t.clientY;const a=u.value.getBoundingClientRect();m=a.left,h=a.top},y=()=>{d.value=!1},f=t=>{if(!d.value)return;const a=t.clientX-i,o=t.clientY-v;u.value.style.left=`${m+a}px`,u.value.style.top=`${h+o}px`};return(0,e.wB)((()=>t.modalValue),(t=>{n.value=t})),(0,e.wB)((()=>s.value),(t=>{t&&C()})),{userId:o,nick:l,chatroomId:s,visible:n,close:g,modalContent:u,startDrag:I,stopDrag:y,drag:f,message:p,messages:k}}},d=o(1241);const i=(0,d.A)(u,[["render",n],["__scopeId","data-v-05da503f"]]);var v=i},780:function(t,a,o){o.r(a),o.d(a,{default:function(){return h}});var e=o(6768),l=o(4232);const s=(0,e.Lk)("h1",null,"채팅 이력",-1),n=["onClick"];function r(t,a,o,r,c,u){const d=(0,e.g2)("ChatHistoryModal");return(0,e.uX)(),(0,e.CE)("div",null,[s,(0,e.Lk)("table",null,[(0,e.Lk)("tbody",null,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(r.chatrooms,(t=>((0,e.uX)(),(0,e.CE)("tr",{key:t.chatroomId,onClick:a=>r.openChatHistoryModal(t.chatroomId)},[(0,e.Lk)("td",null,(0,l.v_)(t.lastContent),1),(0,e.Lk)("td",null,(0,l.v_)(t.lastCredt),1),(0,e.Lk)("td",null,(0,l.v_)(t.status),1)],8,n)))),128))])]),(0,e.bF)(d,{modalValue:r.isChatHistoryModalVisible,"onUpdate:modalValue":a[0]||(a[0]=t=>r.isChatHistoryModalVisible=t),chatroomId:r.chatroomId,userId:r.userId,nick:r.nick},null,8,["modalValue","chatroomId","userId","nick"])])}var c=o(144),u=o(4373),d=o(988),i={components:{ChatHistoryModal:d.A},setup(){const t=(0,c.KR)(localStorage.getItem("id")),a=(0,c.KR)(localStorage.getItem("nick")),o=(0,c.KR)([]),l=(0,c.KR)(""),s=(0,c.KR)(!1),n=async()=>{try{const a=await u.A.post("/api/chat/chatroomList",{id:t.value});o.value=a.data}catch(a){console.error("Error fetching chat list:",a)}},r=t=>{l.value=t,s.value=!0};return(0,e.sV)((()=>{n()})),{userId:t,nick:a,chatrooms:o,chatroomId:l,isChatHistoryModalVisible:s,openChatHistoryModal:r}}},v=o(1241);const m=(0,v.A)(i,[["render",r]]);var h=m}}]);
//# sourceMappingURL=780.003a64bd.js.map