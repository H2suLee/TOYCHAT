"use strict";(self["webpackChunktest1"]=self["webpackChunktest1"]||[]).push([[980],{2980:function(t,e,a){a.r(e),a.d(e,{default:function(){return f}});var o=a(6768),l=a(4232);const n=(0,o.Lk)("h1",null,"채팅 관리",-1),s=["onClick"],r=(0,o.Lk)("td",null,"카테고리",-1),c=(0,o.Lk)("td",null,"채팅방 생성일",-1),u=(0,o.Lk)("td",null,"문의자",-1),d=(0,o.Lk)("td",null,"답변자",-1),i=(0,o.Lk)("td",null,[(0,o.Lk)("button",null,"관리"),(0,o.eW)("클릭하면 카테고리/내용 등록할 수 있음")],-1);function m(t,e,a,m,v,h){const k=(0,o.g2)("ChatHistoryModal");return(0,o.uX)(),(0,o.CE)("div",null,[n,(0,o.Lk)("table",null,[(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(m.chatrooms,(t=>((0,o.uX)(),(0,o.CE)("tr",{key:t.chatroomId,onClick:e=>m.openChatHistoryModal(t.chatroomId)},[r,c,(0,o.Lk)("td",null,(0,l.v_)(t.lastCredt),1),u,d,i],8,s)))),128))])]),(0,o.bF)(k,{modalValue:m.isChatHistoryModalVisible,"onUpdate:modalValue":e[0]||(e[0]=t=>m.isChatHistoryModalVisible=t),chatroomId:m.chatroomId,userId:m.userId,nick:m.nick},null,8,["modalValue","chatroomId","userId","nick"])])}var v=a(144),h=a(4373);const k=h.A.create({baseURL:"http://localhost:9091"});k.interceptors.request.use((t=>{const e=localStorage.getItem("jwt");return e&&(t.headers.Authorization=`Bearer ${e}`),t}),(t=>Promise.reject(t)));var p=k,g=a(988),I={components:{ChatHistoryModal:g.A},setup(){const t=(0,v.KR)(localStorage.getItem("adminId")),e=(0,v.KR)(localStorage.getItem("adminNick")),a=(0,v.KR)([]),l=(0,v.KR)(""),n=(0,v.KR)(!1),s=async()=>{console.log("admId : ",t.value),console.log("admnick : ",e.value);try{const e=await p.post("/api/admin/chat/mnglist",{id:t.value});a.value=e.data}catch(o){console.error("Error fetching chat list:",o)}},r=t=>{l.value=t,n.value=!0};return(0,o.sV)((()=>{s()})),{userId:t,nick:e,chatrooms:a,chatroomId:l,isChatHistoryModalVisible:n,openChatHistoryModal:r}}},C=a(1241);const y=(0,C.A)(I,[["render",m]]);var f=y},988:function(t,e,a){a.d(e,{A:function(){return m}});var o=a(6768),l=a(5130),n=a(4232);function s(t,e,a,s,r,c){return s.visible?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"modal-overlay",onClick:e[4]||(e[4]=(0,l.D$)(((...t)=>s.close&&s.close(...t)),["self"]))},[(0,o.Lk)("div",{class:"modal-content",ref:"modalContent",onMousedown:e[1]||(e[1]=(...t)=>s.startDrag&&s.startDrag(...t)),onMouseup:e[2]||(e[2]=(...t)=>s.stopDrag&&s.stopDrag(...t)),onMousemove:e[3]||(e[3]=(...t)=>s.drag&&s.drag(...t))},[(0,o.Lk)("button",{class:"modal-close",onClick:e[0]||(e[0]=(...t)=>s.close&&s.close(...t))},"×"),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.messages,((t,e)=>((0,o.uX)(),(0,o.CE)("div",{key:e},[(0,o.Lk)("p",null,(0,n.v_)(t.nick)+" : "+(0,n.v_)(t.content),1)])))),128))],544)])):(0,o.Q3)("",!0)}var r=a(144),c=a(4373),u={props:{modalValue:{type:Boolean,default:!1},chatroomId:{type:String,default:""}},emits:["update:modalValue"],setup(t,{emit:e}){const a=(0,o.EW)((()=>t.userId)),l=(0,o.EW)((()=>t.nick)),n=(0,o.EW)((()=>t.chatroomId)),s=(0,r.KR)(t.modalValue),u=(0,r.KR)(null);let d=(0,r.KR)(!1),i=0,m=0,v=0,h=0;const k=(0,r.KR)("");let p=(0,r.KR)([]);const g=async()=>{try{const t=await c.A.post("/api/chat/chatList",{chatroomId:n.value});p.value=t.data}catch(t){console.error("Error fetching chat list:",t)}},I=()=>{n.value="",p.value=[],e("update:modalValue",!1)},C=t=>{d.value=!0,i=t.clientX,m=t.clientY;const e=u.value.getBoundingClientRect();v=e.left,h=e.top},y=()=>{d.value=!1},f=t=>{if(!d.value)return;const e=t.clientX-i,a=t.clientY-m;u.value.style.left=`${v+e}px`,u.value.style.top=`${h+a}px`};return(0,o.wB)((()=>t.modalValue),(t=>{s.value=t})),(0,o.wB)((()=>n.value),(t=>{t&&g()})),{userId:a,nick:l,chatroomId:n,visible:s,close:I,modalContent:u,startDrag:C,stopDrag:y,drag:f,message:k,messages:p}}},d=a(1241);const i=(0,d.A)(u,[["render",s],["__scopeId","data-v-05da503f"]]);var m=i}}]);
//# sourceMappingURL=980.e1953433.js.map