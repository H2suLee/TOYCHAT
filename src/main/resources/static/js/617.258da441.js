"use strict";(self["webpackChunktest1"]=self["webpackChunktest1"]||[]).push([[617],{7617:function(t,l,e){e.r(l),e.d(l,{default:function(){return I}});var a=e(6768),o=e(4232);const n=(0,a.Lk)("h1",null,"채팅 관리",-1),s=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,"roomId"),(0,a.Lk)("td",null,"상태(진행중/완료)"),(0,a.Lk)("td",null,"카테고리"),(0,a.Lk)("td",null,"생성일"),(0,a.Lk)("td",null,"수정일"),(0,a.Lk)("td",null,"문의자"),(0,a.Lk)("td",null,"답변자"),(0,a.Lk)("td",null,"관리")])],-1),r=["onClick"],u=(0,a.Lk)("td",null,"카테고리",-1),d=(0,a.Lk)("td",null,[(0,a.Lk)("button",null,"관리(클릭하면 카테고리/내용 등록할 수 있음)")],-1);function c(t,l,e,c,i,k){const m=(0,a.g2)("ChatHistoryModal");return(0,a.uX)(),(0,a.CE)("div",null,[n,(0,a.Lk)("table",null,[s,(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(c.chatrooms,(t=>((0,a.uX)(),(0,a.CE)("tr",{key:t.chatroomId,onClick:l=>c.openChatHistoryModal(t.chatroomId)},[(0,a.Lk)("td",null,(0,o.v_)(t.chatroomId),1),(0,a.Lk)("td",null,(0,o.v_)(t.status),1),u,(0,a.Lk)("td",null,(0,o.v_)(t.credt),1),(0,a.Lk)("td",null,(0,o.v_)(t.upddt),1),(0,a.Lk)("td",null,(0,o.v_)(t.usr.nick),1),(0,a.Lk)("td",null,(0,o.v_)(t.adm.nick),1),d],8,r)))),128))])]),(0,a.bF)(m,{modalValue:c.isChatHistoryModalVisible,"onUpdate:modalValue":l[0]||(l[0]=t=>c.isChatHistoryModalVisible=t),chatroomId:c.chatroomId,userId:c.userId,nick:c.nick},null,8,["modalValue","chatroomId","userId","nick"])])}var i=e(144),k=e(4373);const m=k.A.create({baseURL:"https://oral-therine-heesu-f4935ad1.koyeb.app/"});m.interceptors.request.use((t=>{const l=localStorage.getItem("jwt");return l&&(t.headers.Authorization=`Bearer ${l}`),t}),(t=>Promise.reject(t)));var v=m,h=e(988),p={components:{ChatHistoryModal:h.A},setup(){const t=(0,i.KR)(localStorage.getItem("adminId")),l=(0,i.KR)(localStorage.getItem("adminNick")),e=(0,i.KR)([]),o=(0,i.KR)(""),n=(0,i.KR)(!1),s=async()=>{console.log("admId : ",t.value),console.log("admnick : ",l.value);try{const l=await v.post("/api/admin/chat/mnglist",{id:t.value});console.log("res : ",l.data),e.value=l.data}catch(a){console.error("Error fetching chat list:",a)}},r=t=>{o.value=t,n.value=!0};return(0,a.sV)((()=>{s()})),{userId:t,nick:l,chatrooms:e,chatroomId:o,isChatHistoryModalVisible:n,openChatHistoryModal:r}}},g=e(1241);const L=(0,g.A)(p,[["render",c]]);var I=L},988:function(t,l,e){e.d(l,{A:function(){return k}});var a=e(6768),o=e(5130),n=e(4232);function s(t,l,e,s,r,u){return s.visible?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"modal-overlay",onClick:l[4]||(l[4]=(0,o.D$)(((...t)=>s.close&&s.close(...t)),["self"]))},[(0,a.Lk)("div",{class:"modal-content",ref:"modalContent",onMousedown:l[1]||(l[1]=(...t)=>s.startDrag&&s.startDrag(...t)),onMouseup:l[2]||(l[2]=(...t)=>s.stopDrag&&s.stopDrag(...t)),onMousemove:l[3]||(l[3]=(...t)=>s.drag&&s.drag(...t))},[(0,a.Lk)("button",{class:"modal-close",onClick:l[0]||(l[0]=(...t)=>s.close&&s.close(...t))},"×"),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.messages,((t,l)=>((0,a.uX)(),(0,a.CE)("div",{key:l},[(0,a.Lk)("p",null,(0,n.v_)(t.nick)+" : "+(0,n.v_)(t.content),1)])))),128))],544)])):(0,a.Q3)("",!0)}var r=e(144),u=e(4373),d={props:{modalValue:{type:Boolean,default:!1},chatroomId:{type:String,default:""}},emits:["update:modalValue"],setup(t,{emit:l}){const e=(0,a.EW)((()=>t.userId)),o=(0,a.EW)((()=>t.nick)),n=(0,a.EW)((()=>t.chatroomId)),s=(0,r.KR)(t.modalValue),d=(0,r.KR)(null);let c=(0,r.KR)(!1),i=0,k=0,m=0,v=0;const h=(0,r.KR)("");let p=(0,r.KR)([]);const g=async()=>{try{const t=await u.A.post("/api/chat/chatList",{chatroomId:n.value});p.value=t.data}catch(t){console.error("Error fetching chat list:",t)}},L=()=>{n.value="",p.value=[],l("update:modalValue",!1)},I=t=>{c.value=!0,i=t.clientX,k=t.clientY;const l=d.value.getBoundingClientRect();m=l.left,v=l.top},C=()=>{c.value=!1},y=t=>{if(!c.value)return;const l=t.clientX-i,e=t.clientY-k;d.value.style.left=`${m+l}px`,d.value.style.top=`${v+e}px`};return(0,a.wB)((()=>t.modalValue),(t=>{s.value=t})),(0,a.wB)((()=>n.value),(t=>{t&&g()})),{userId:e,nick:o,chatroomId:n,visible:s,close:L,modalContent:d,startDrag:I,stopDrag:C,drag:y,message:h,messages:p}}},c=e(1241);const i=(0,c.A)(d,[["render",s],["__scopeId","data-v-05da503f"]]);var k=i}}]);
//# sourceMappingURL=617.258da441.js.map