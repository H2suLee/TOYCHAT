"use strict";(self["webpackChunktest1"]=self["webpackChunktest1"]||[]).push([[66],{79:function(t,l,o){o.d(l,{A:function(){return v}});var a=o(6768),e=o(5130),n=o(4232);function s(t,l,o,s,r,u){return s.visible?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"modal-overlay",onClick:l[4]||(l[4]=(0,e.D$)(((...t)=>s.close&&s.close(...t)),["self"]))},[(0,a.Lk)("div",{class:"modal-content",ref:"modalContent",onMousedown:l[1]||(l[1]=(...t)=>s.startDrag&&s.startDrag(...t)),onMouseup:l[2]||(l[2]=(...t)=>s.stopDrag&&s.stopDrag(...t)),onMousemove:l[3]||(l[3]=(...t)=>s.drag&&s.drag(...t))},[(0,a.Lk)("button",{class:"modal-close",onClick:l[0]||(l[0]=(...t)=>s.close&&s.close(...t))},"×"),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.messages,((t,l)=>((0,a.uX)(),(0,a.CE)("div",{key:l},[(0,a.Lk)("p",null,(0,n.v_)(t.nick)+" : "+(0,n.v_)(t.content),1)])))),128))],544)])):(0,a.Q3)("",!0)}var r=o(144),u=o(4373),c={props:{modalValue:{type:Boolean,default:!1},chatroomId:{type:String,default:""}},emits:["update:modalValue"],setup(t,{emit:l}){const o=(0,a.EW)((()=>t.chatroomId)),e=(0,r.KR)(t.modalValue),n=(0,r.KR)(null);let s=(0,r.KR)(!1),c=0,d=0,i=0,v=0;const m=(0,r.KR)("");let h=(0,r.KR)([]);const k=async()=>{try{const t=await u.A.post("/api/chat/chatList",{chatroomId:o.value});h.value=t.data}catch(t){console.error("Error fetching chat list:",t)}},p=()=>{o.value="",h.value=[],l("update:modalValue",!1)},C=t=>{s.value=!0,c=t.clientX,d=t.clientY;const l=n.value.getBoundingClientRect();i=l.left,v=l.top},g=()=>{s.value=!1},L=t=>{if(!s.value)return;const l=t.clientX-c,o=t.clientY-d;n.value.style.left=`${i+l}px`,n.value.style.top=`${v+o}px`};return(0,a.wB)((()=>t.modalValue),(t=>{e.value=t})),(0,a.wB)((()=>o.value),(t=>{t&&k()})),{chatroomId:o,visible:e,close:p,modalContent:n,startDrag:C,stopDrag:g,drag:L,message:m,messages:h}}},d=o(1241);const i=(0,d.A)(c,[["render",s],["__scopeId","data-v-0d20f2f4"]]);var v=i},4066:function(t,l,o){o.r(l),o.d(l,{default:function(){return k}});var a=o(6768),e=o(4232);const n=(0,a.Lk)("h1",null,"채팅 이력",-1),s=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,"roomId"),(0,a.Lk)("td",null,"생성일"),(0,a.Lk)("td",null,"답변자"),(0,a.Lk)("td",null,"채팅"),(0,a.Lk)("td",null,"마지막 채팅일"),(0,a.Lk)("td",null,"상태(대기/진행중/완료)")])],-1),r=["onClick"];function u(t,l,o,u,c,d){const i=(0,a.g2)("ChatHistoryModal");return(0,a.uX)(),(0,a.CE)("div",null,[n,(0,a.Lk)("table",null,[s,(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(u.chatrooms,(t=>((0,a.uX)(),(0,a.CE)("tr",{key:t.chatroomId,onClick:l=>u.openChatHistoryModal(t.chatroomId)},[(0,a.Lk)("td",null,(0,e.v_)(t.chatroomId),1),(0,a.Lk)("td",null,(0,e.v_)(t.credt),1),(0,a.Lk)("td",null,(0,e.v_)(t.adm.nick),1),(0,a.Lk)("td",null,(0,e.v_)(t.lastContent),1),(0,a.Lk)("td",null,(0,e.v_)(t.lastCredt),1),(0,a.Lk)("td",null,(0,e.v_)(t.status),1)],8,r)))),128))])]),(0,a.bF)(i,{modalValue:u.isChatHistoryModalVisible,"onUpdate:modalValue":l[0]||(l[0]=t=>u.isChatHistoryModalVisible=t),chatroomId:u.chatroomId},null,8,["modalValue","chatroomId"])])}var c=o(144),d=o(4373),i=o(79),v={components:{ChatHistoryModal:i.A},setup(){const t=(0,c.KR)(localStorage.getItem("id")),l=(0,c.KR)(localStorage.getItem("nick")),o=(0,c.KR)([]),e=(0,c.KR)(""),n=(0,c.KR)(!1),s=async()=>{try{const l=await d.A.post("/api/chat/chatroomList",{id:t.value});console.log("res",l.data),o.value=l.data}catch(l){console.error("Error fetching chat list:",l)}},r=t=>{e.value=t,n.value=!0};return(0,a.sV)((()=>{s()})),{userId:t,nick:l,chatrooms:o,chatroomId:e,isChatHistoryModalVisible:n,openChatHistoryModal:r}}},m=o(1241);const h=(0,m.A)(v,[["render",u]]);var k=h}}]);
//# sourceMappingURL=66.64a39755.js.map