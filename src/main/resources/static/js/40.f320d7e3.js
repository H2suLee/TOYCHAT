"use strict";(self["webpackChunktest1"]=self["webpackChunktest1"]||[]).push([[40],{1040:function(o,e,t){t.r(e),t.d(e,{default:function(){return m}});var l=t(6768),n=t(4232);const a=(0,l.Lk)("h1",null,"실시간 채팅 지원",-1),c=["onClick"];function r(o,e,t,r,i,s){const d=(0,l.g2)("ChatModal");return(0,l.uX)(),(0,l.CE)("div",null,[a,(0,l.Lk)("table",null,[(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.chatrooms,(o=>((0,l.uX)(),(0,l.CE)("tr",{key:o.chatroomId,onClick:e=>r.openChatModal(o._id)},[(0,l.Lk)("td",null,"닉: "+(0,n.v_)(o.participants[0].nick),1),(0,l.Lk)("td",null,"생성일: "+(0,n.v_)(o.credt),1),(0,l.Lk)("td",null,"상태: "+(0,n.v_)(o.status),1)],8,c)))),128))])]),(0,l.bF)(d,{modelValue:r.isModalVisible,"onUpdate:modelValue":e[0]||(e[0]=o=>r.isModalVisible=o),userId:r.userId,nick:r.nick,role:r.role,chatroomId:r.chatroomId},null,8,["modelValue","userId","nick","role","chatroomId"])])}var i=t(144),s=t(4373),d=t(5733),u={components:{ChatModal:d.A},setup(){const o=(0,i.KR)(localStorage.getItem("adminId")),e=(0,i.KR)(localStorage.getItem("adminNick")),t=(0,i.KR)("ADM"),n=(0,i.KR)(!1),a=(0,i.KR)(""),c=(0,i.KR)([]);let r=null;const d=o=>{a.value=o,n.value=!0},u=async()=>{try{const o=await s.A.post("/api/admin/chat/liveChatWaitingList",{});c.value=o.data}catch(o){console.error("Error fetching chat list:",o)}},k=()=>{let o=`ws://localhost:9090/ws/adminOnList?nick=${e.value}`;r=new WebSocket(o),r.onopen=()=>{console.log("activeAdminChkSocket connection opened")},r.onclose=()=>{console.log("activeAdminChkSocket connection closed")},r.onerror=o=>{console.error("activeAdminChkSocket error:",o)}};return(0,l.sV)((()=>{k(),u()})),(0,l.hi)((()=>{r&&r.close()})),{userId:o,nick:e,role:t,chatrooms:c,chatroomId:a,isModalVisible:n,openChatModal:d}}},k=t(1241);const h=(0,k.A)(u,[["render",r]]);var m=h}}]);
//# sourceMappingURL=40.f320d7e3.js.map