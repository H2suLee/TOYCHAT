"use strict";(self["webpackChunktest1"]=self["webpackChunktest1"]||[]).push([[215],{988:function(t,l,a){a.d(l,{A:function(){return k}});var o=a(6768),e=a(5130),n=a(4232);function s(t,l,a,s,r,u){return s.visible?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"modal-overlay",onClick:l[4]||(l[4]=(0,e.D$)(((...t)=>s.close&&s.close(...t)),["self"]))},[(0,o.Lk)("div",{class:"modal-content",ref:"modalContent",onMousedown:l[1]||(l[1]=(...t)=>s.startDrag&&s.startDrag(...t)),onMouseup:l[2]||(l[2]=(...t)=>s.stopDrag&&s.stopDrag(...t)),onMousemove:l[3]||(l[3]=(...t)=>s.drag&&s.drag(...t))},[(0,o.Lk)("button",{class:"modal-close",onClick:l[0]||(l[0]=(...t)=>s.close&&s.close(...t))},"×"),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.messages,((t,l)=>((0,o.uX)(),(0,o.CE)("div",{key:l},[(0,o.Lk)("p",null,(0,n.v_)(t.nick)+" : "+(0,n.v_)(t.content),1)])))),128))],544)])):(0,o.Q3)("",!0)}var r=a(144),u=a(4373),c={props:{modalValue:{type:Boolean,default:!1},chatroomId:{type:String,default:""}},emits:["update:modalValue"],setup(t,{emit:l}){const a=(0,o.EW)((()=>t.userId)),e=(0,o.EW)((()=>t.nick)),n=(0,o.EW)((()=>t.chatroomId)),s=(0,r.KR)(t.modalValue),c=(0,r.KR)(null);let d=(0,r.KR)(!1),i=0,k=0,v=0,m=0;const h=(0,r.KR)("");let p=(0,r.KR)([]);const C=async()=>{try{const t=await u.A.post("/api/chat/chatList",{chatroomId:n.value});p.value=t.data}catch(t){console.error("Error fetching chat list:",t)}},g=()=>{n.value="",p.value=[],l("update:modalValue",!1)},I=t=>{d.value=!0,i=t.clientX,k=t.clientY;const l=c.value.getBoundingClientRect();v=l.left,m=l.top},L=()=>{d.value=!1},y=t=>{if(!d.value)return;const l=t.clientX-i,a=t.clientY-k;c.value.style.left=`${v+l}px`,c.value.style.top=`${m+a}px`};return(0,o.wB)((()=>t.modalValue),(t=>{s.value=t})),(0,o.wB)((()=>n.value),(t=>{t&&C()})),{userId:a,nick:e,chatroomId:n,visible:s,close:g,modalContent:c,startDrag:I,stopDrag:L,drag:y,message:h,messages:p}}},d=a(1241);const i=(0,d.A)(c,[["render",s],["__scopeId","data-v-05da503f"]]);var k=i},6215:function(t,l,a){a.r(l),a.d(l,{default:function(){return h}});var o=a(6768),e=a(4232);const n=(0,o.Lk)("h1",null,"채팅 이력",-1),s=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("td",null,"roomId"),(0,o.Lk)("td",null,"생성일"),(0,o.Lk)("td",null,"답변자"),(0,o.Lk)("td",null,"채팅"),(0,o.Lk)("td",null,"마지막 채팅일"),(0,o.Lk)("td",null,"상태(대기/진행중/완료)")])],-1),r=["onClick"];function u(t,l,a,u,c,d){const i=(0,o.g2)("ChatHistoryModal");return(0,o.uX)(),(0,o.CE)("div",null,[n,(0,o.Lk)("table",null,[s,(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(u.chatrooms,(t=>((0,o.uX)(),(0,o.CE)("tr",{key:t.chatroomId,onClick:l=>u.openChatHistoryModal(t.chatroomId)},[(0,o.Lk)("td",null,(0,e.v_)(t.chatroomId),1),(0,o.Lk)("td",null,(0,e.v_)(t.credt),1),(0,o.Lk)("td",null,(0,e.v_)(t.adm.nick),1),(0,o.Lk)("td",null,(0,e.v_)(t.lastContent),1),(0,o.Lk)("td",null,(0,e.v_)(t.lastCredt),1),(0,o.Lk)("td",null,(0,e.v_)(t.status),1)],8,r)))),128))])]),(0,o.bF)(i,{modalValue:u.isChatHistoryModalVisible,"onUpdate:modalValue":l[0]||(l[0]=t=>u.isChatHistoryModalVisible=t),chatroomId:u.chatroomId,userId:u.userId,nick:u.nick},null,8,["modalValue","chatroomId","userId","nick"])])}var c=a(144),d=a(4373),i=a(988),k={components:{ChatHistoryModal:i.A},setup(){const t=(0,c.KR)(localStorage.getItem("id")),l=(0,c.KR)(localStorage.getItem("nick")),a=(0,c.KR)([]),e=(0,c.KR)(""),n=(0,c.KR)(!1),s=async()=>{try{const l=await d.A.post("/api/chat/chatroomList",{id:t.value});console.log("res",l.data),a.value=l.data}catch(l){console.error("Error fetching chat list:",l)}},r=t=>{e.value=t,n.value=!0};return(0,o.sV)((()=>{s()})),{userId:t,nick:l,chatrooms:a,chatroomId:e,isChatHistoryModalVisible:n,openChatHistoryModal:r}}},v=a(1241);const m=(0,v.A)(k,[["render",u]]);var h=m}}]);
//# sourceMappingURL=215.f199a73d.js.map