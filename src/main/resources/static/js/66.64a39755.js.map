{"version":3,"file":"js/66.64a39755.js","mappings":"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","sources":["webpack://test1/./src/user/modules/components/chat/ChatHistoryModal.vue","webpack://test1/./src/user/modules/components/chat/ChatHistoryModal.vue?1830","webpack://test1/./src/user/modules/components/chat/ChatList.vue","webpack://test1/./src/user/modules/components/chat/ChatList.vue?6f6f"],"sourcesContent":["<template>\r\n  <div v-if=\"visible\" class=\"modal-overlay\" @click.self=\"close\">\r\n    <div\r\n      class=\"modal-content\"\r\n      ref=\"modalContent\"\r\n      @mousedown=\"startDrag\"\r\n      @mouseup=\"stopDrag\"\r\n      @mousemove=\"drag\"\r\n    >\r\n      <button class=\"modal-close\" @click=\"close\">×</button>\r\n      <div v-for=\"(msg, index) in messages\" :key=\"index\">\r\n        <p>{{ msg.nick }} : {{ msg.content }}</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, watch, computed } from \"vue\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  props: {\r\n    modalValue: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    chatroomId: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n  },\r\n  emits: [\"update:modalValue\"],\r\n  setup(props, { emit }) {\r\n    const chatroomId = computed(() => props.chatroomId);\r\n    const visible = ref(props.modalValue);\r\n    const modalContent = ref(null);\r\n    let isDragging = ref(false);\r\n    let startX = 0;\r\n    let startY = 0;\r\n    let initialLeft = 0;\r\n    let initialTop = 0;\r\n    const message = ref(\"\");\r\n    let messages = ref([]);\r\n\r\n    // 대화내용 불러오기\r\n    const getMyChat = async () => {\r\n      try {\r\n        const response = await axios.post(\"/api/chat/chatList\", {\r\n          chatroomId: chatroomId.value,\r\n        });\r\n        messages.value = response.data;\r\n      } catch (error) {\r\n        console.error(\"Error fetching chat list:\", error);\r\n      }\r\n    };\r\n    // 닫기\r\n    const close = () => {\r\n      chatroomId.value = \"\";\r\n      messages.value = [];\r\n      emit(\"update:modalValue\", false);\r\n    };\r\n\r\n    //드래그 제어\r\n    const startDrag = (event) => {\r\n      isDragging.value = true;\r\n      startX = event.clientX;\r\n      startY = event.clientY;\r\n      const rect = modalContent.value.getBoundingClientRect();\r\n      initialLeft = rect.left;\r\n      initialTop = rect.top;\r\n    };\r\n    const stopDrag = () => {\r\n      isDragging.value = false;\r\n    };\r\n    const drag = (event) => {\r\n      if (!isDragging.value) return;\r\n      const dx = event.clientX - startX;\r\n      const dy = event.clientY - startY;\r\n      modalContent.value.style.left = `${initialLeft + dx}px`;\r\n      modalContent.value.style.top = `${initialTop + dy}px`;\r\n    };\r\n\r\n    watch(\r\n      () => props.modalValue,\r\n      (newValue) => {\r\n        visible.value = newValue;\r\n      }\r\n    );\r\n    watch(\r\n      () => chatroomId.value,\r\n      (newValue) => {\r\n        if (newValue) {\r\n          getMyChat();\r\n        }\r\n      }\r\n    );\r\n\r\n    return {\r\n      chatroomId,\r\n      visible,\r\n      close,\r\n      modalContent,\r\n      startDrag,\r\n      stopDrag,\r\n      drag,\r\n      message,\r\n      messages,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.modal-content {\r\n  background: #fff;\r\n  border-radius: 8px;\r\n  padding: 20px;\r\n  position: absolute; /* 변경: absolute로 설정하여 드래그 시 이동 가능 */\r\n  cursor: move; /* 드래그 가능한 모양으로 변경 */\r\n  max-width: 500px;\r\n  width: 100%;\r\n}\r\n\r\n.modal-close {\r\n  position: absolute;\r\n  top: 10px;\r\n  right: 10px;\r\n  border: none;\r\n  background: none;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n}\r\n</style>\r\n","import { render } from \"./ChatHistoryModal.vue?vue&type=template&id=0d20f2f4&scoped=true\"\nimport script from \"./ChatHistoryModal.vue?vue&type=script&lang=js\"\nexport * from \"./ChatHistoryModal.vue?vue&type=script&lang=js\"\n\nimport \"./ChatHistoryModal.vue?vue&type=style&index=0&id=0d20f2f4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0d20f2f4\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <h1>채팅 이력</h1>\r\n    <table>\r\n      <!-- 생성일, 답변자, 내용, 마지막 채팅일시 -->\r\n      <thead>\r\n        <tr>\r\n          <td>roomId</td>\r\n          <td>생성일</td>\r\n          <td>답변자</td>\r\n          <td>채팅</td>\r\n          <td>마지막 채팅일</td>\r\n          <td>상태(대기/진행중/완료)</td>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr\r\n          v-for=\"chat in chatrooms\"\r\n          :key=\"chat.chatroomId\"\r\n          @click=\"openChatHistoryModal(chat.chatroomId)\"\r\n        >\r\n          <td>{{ chat.chatroomId }}</td>\r\n          <td>{{ chat.credt }}</td>\r\n          <td>{{ chat.adm.nick }}</td>\r\n          <td>{{ chat.lastContent }}</td>\r\n          <td>{{ chat.lastCredt }}</td>\r\n          <td>{{ chat.status }}</td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <ChatHistoryModal\r\n      v-model:modalValue=\"isChatHistoryModalVisible\"\r\n      :chatroomId=\"chatroomId\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted } from \"vue\";\r\nimport axios from \"axios\";\r\nimport ChatHistoryModal from \"./ChatHistoryModal.vue\";\r\n\r\nexport default {\r\n  components: { ChatHistoryModal },\r\n  setup() {\r\n    const userId = ref(localStorage.getItem(\"id\"));\r\n    const nick = ref(localStorage.getItem(\"nick\"));\r\n    const chatrooms = ref([]);\r\n    const chatroomId = ref(\"\");\r\n    const isChatHistoryModalVisible = ref(false);\r\n    // 채팅 리스트 가져오기 함수\r\n    const getMyChatroomList = async () => {\r\n      try {\r\n        const response = await axios.post(\"/api/chat/chatroomList\", {\r\n          id: userId.value,\r\n        });\r\n        console.log(\"res\", response.data);\r\n        chatrooms.value = response.data;\r\n      } catch (error) {\r\n        console.error(\"Error fetching chat list:\", error);\r\n      }\r\n    };\r\n\r\n    // 채팅창 열기\r\n    const openChatHistoryModal = (id) => {\r\n      chatroomId.value = id;\r\n      isChatHistoryModalVisible.value = true;\r\n    };\r\n\r\n    // mounted 훅에서 getMyChatroomList 호출\r\n    onMounted(() => {\r\n      getMyChatroomList();\r\n    });\r\n\r\n    return {\r\n      userId,\r\n      nick,\r\n      chatrooms,\r\n      chatroomId,\r\n      isChatHistoryModalVisible,\r\n      openChatHistoryModal,\r\n    };\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./ChatList.vue?vue&type=template&id=48e6ea78\"\nimport script from \"./ChatList.vue?vue&type=script&lang=js\"\nexport * from \"./ChatList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["$setup","visible","_createElementBlock","key","class","onClick","_cache","_withModifiers","args","close","_createElementVNode","ref","onMousedown","startDrag","onMouseup","stopDrag","onMousemove","drag","_Fragment","_renderList","messages","msg","index","_toDisplayString","nick","content","_createCommentVNode","props","modalValue","type","Boolean","default","chatroomId","String","emits","setup","emit","computed","modalContent","isDragging","startX","startY","initialLeft","initialTop","message","getMyChat","async","response","axios","post","value","data","error","console","event","clientX","clientY","rect","getBoundingClientRect","left","top","dx","dy","style","watch","newValue","__exports__","render","_hoisted_1","_hoisted_2","chatrooms","chat","$event","openChatHistoryModal","credt","adm","lastContent","lastCredt","status","_hoisted_3","_createVNode","_component_ChatHistoryModal","isChatHistoryModalVisible","components","ChatHistoryModal","userId","localStorage","getItem","getMyChatroomList","id","log","onMounted"],"sourceRoot":""}